# **基于YOLOv5与改进VGG的控制室数字仪表自动读数方法**

## 一、项目介绍

要对控制室仪表进行视频记录，数据存放在服务器，需要将视频图片进行识别将图片转化为数据，进行实时存储，通过远程传输，将仪表参数名称和对应的数据展示在指挥中心。指挥中心部署一台电脑，两个显示器，一个可以显示现场实时视频，一个屏幕可以看仪表参数。

## 二、技术背景

目前设备数字仪表示数读取仍以人工读数为主，存在效率低、可靠性差等问题，而且部分设备运行环境复杂，一定程度上加剧了人工读数弊端。以上不足表明仅依靠人工读数不能及时准确地判断设备运行状态，而且也无法满足当前要求。

随着图像处理以及深度学习技术发展，基于上述两种技术的数字仪表自动读数方法表现出了效率高、精度高的优点，有效地解决了人工读数存在的问题，能准确高效地判断设备的运行状态。数字仪表自动读数技术属于字符识别领域的研究内容。针对数字式仪表的识别，主要分为传统图像处理的目标检测方法和基于深度学习的目标检测方法。

传统数字仪表识别方法计算量大、实时性不够和精度较低。考虑到传统的读数识别方法存在的不足，为进一步提高数字仪表自动读数准确率和效率，本项目提出一种基于深度学习领域的目标检测算法进行数字仪表的自动读数。

## 三、技术介绍

基于YOLOv5与改进VGG的控制室数字仪表自动读数方法，包括数字区域定位模型和仪表字符识别模型：基于YOLOv5x网络训练定位模型，将训练图片以及对应的标注信息输入网络，训练完成后得到的数字区域定位模型；再对定位出的数字区域图像采用改进的VGG模型进行字符识别，并输出仪表读数结果。

### 1、基于YOLOv5的数字区域定位模型

仪表数字区域定位问题是目标检测领域的关键研究内容。目前常用的目标检测算法主要分为两类：一类是基于候选区域的Two⁃stage目标检测算法，主要包括Fast⁃RCNN[、Faster⁃RCNN以及R⁃FCN等，此类算法基于候选区域获取目标图像区域，检测精度高，然而存在训练时间长、计算速度慢的问题；另一类算法是One⁃stage目标检测算法，主要包括SSD算法和YOLO系列，此类算法运行速度快，但存在检测精度低，对小目标检测效果较差的不足。

由于数字仪表图像中的数字区域相对整张图像来说尺寸较小，故难以检测。为了准确地识别数字仪表读数，数字区域定位网络必须对数字区域有较好的检测效果。基于文献调研及数字检测方法现状，综合考虑检测速度与精度要求，本设计采用最新的YOLOv5模型检测仪表数字区域。

YOLOv5是于2020年6月提出的YOLO实时目标检测算法系列版本，其具有速度快、精度高及对小目标检测效果好等特点。YOLOv5模型相YOLOv4具有网络结构更小、部署成本低及灵活性高等优点。同时，YOLOv5模型具有更好的检测精度以及检测速度，是优秀的One⁃stage检测网络。其模型结构主要包括以下组成部分：

（1）输入端：YOLOv5的Head网络由3个不同的输出层组成，分别负责检测大中小尺度的目标。

（2）Backbone网络：YOLOv5使用CSPDarknet53作为其主干网络，其具有较强的特征提取能力和计算效率。

（3）Neck网络：YOLOv5使用的是FPN（FPN网络能够在不同的特征图层次上进行检测，可以提高目标检测的性能）网络，可以融合来自不同特征图层次的信息。

（4）输出端：YOLOv5使用的是Focal Loss损失函数，该函数可以缓解目标检测中类别不平衡的问题，提高模型的性能。YOLOv5在输出结果后，会对重叠的目标框进行非极大值抑制（NMS）处理，以得到最终的检测结果。

（5）激活函数，YOLOv5使用的是Mish激活函数，该函数是一种替代ReLU的激活函数，可以提高模型的性能。

YOLOv5模型网络基本结构如图1所示。

![d134fd96-75ba-46b3-ac01-ccf5bfb6b556](file:///C:/Users/%E6%89%B6%E8%8B%8F/Pictures/Typedown/d134fd96-75ba-46b3-ac01-ccf5bfb6b556.png)

图1 YOLOv5模型网络基本结构

它有s，m，l和x四个不同的模型，主要是网络的层数和宽度不同。总体来说，YOLOv5的模型结构相对简单，但其使用了多种技术和策略，如CSP结构、FPN网络、Mish激活函数和Focal Loss损失函数等，以提高模型的性能和鲁棒性。测试结果表明，该方法能准确、有效地读取数字仪表示数，具有较好的准确性和高效性。

### 2、基于改进VGG的仪表字符识别模型

VGG网络是2014年由牛津大学的Visual Geometry Group提出的一种特征提取能力强的卷积神经网络，包含VGG11、VGG13、VGG16以及VGG19等多种具有不同网络层数、卷积核参数的模型。VGG网络结构主要包含卷积层、池化层和全连接层，其卷积核的尺寸相较于AlexNet更小，但更深网络层使VGG网络有更强的特征提取能力，且其计算量与AlexNet相当。为进一步提高数字仪表自动读数准确率，项目代码中基于VGG11模型，对其卷积层、池化层和全连接层三个模块进行改进，具体内容包括：

（1）将原始的输入3通道RGB图像修改为输入单通道灰度图像，将输入尺寸设置为32×100，改进后的网络只需要对1个通道进行特征提取；同时将第7层卷积层的核尺寸修改为2×2，删除了VGG11网络的最后一层卷积层，并在第3层、第5层和第7层卷积层后加入批归一化。

（3）将第3层和第4层的最大池化层窗口修改为1×2的矩形窗口，即可获得宽度特征图像。

（4）输入的数字仪表图像经过VGG特征提取模块提取特征后，输出特征图像是高度为1，长度为26的一维序列形式。考虑到提取特征后，一个数字字符的深层特征分布在几个相邻的序列刻度上，而一维长卷积核能综合考虑相邻刻度间的特征信息。因此设计将VGG网络中的全连接层替换为卷积层，其卷积核的尺寸和数量分别设置为1×7和11，以此提取特征序列的前后特征信息，输出字符概率分布序列。改进后的VGG网络结构参数如表1所示。

表1 改进的VGG网络结构

![151efe90-b1d3-40fe-9a8b-67e20a6bc2e4](file:///C:/Users/%E6%89%B6%E8%8B%8F/Pictures/Typedown/151efe90-b1d3-40fe-9a8b-67e20a6bc2e4.png)

为了加速网络训练，设计在第3层、第5层和第7层卷积后面加入了批归一化。提取的仪表数字区域图像通过上述改进VGG网络提取特征后输出字符概率分布序列，再取得概率最大的数字即可实现最终的仪表示数读取。

### 3、数字仪表自动读数流程

本项目以数字式仪表为研究对象，基于上述分析提出一种基于YOLOv5与改进VGG的数字仪表自动读数模型，具体识别读数流程如图2所示

![e0bb0bb5-3d55-4977-bc6d-666afa5daad7](file:///C:/Users/%E6%89%B6%E8%8B%8F/Pictures/Typedown/e0bb0bb5-3d55-4977-bc6d-666afa5daad7.png)

图2 数字仪表自动读数模型流程图

由图2可得，数字仪表自动读数模型具体步骤包括：

（1）基于数字区域定位网络对输入的目标图像数字区域进行检测，输出预测的数字区域边界框；

（2）根据预测边界框提取数字区域，将其输入改进VGG网络特征提取层提取区域特征信息，输出特征序列；

（3）经过长卷积层处理后，获得字符概率分布序列，获取概率最大输出数字，返回仪表最终读数结果。
